function sdnClick(e){(new Image).src="https://sdn.kugou.com/link.aspx?id="+e+"&url=&t="+Math.random()}var pcSongList={jLoader:function(o,n){o.splice!==Array.prototype.splice&&(o=[o]);!function(){var e,t,a;0<o.length?(e=o.splice(0,1),t=arguments.callee,(a=document.createElement("script")).type="text/javascript",a.src=e,document.getElementsByTagName("head")[0].appendChild(a),"function"==typeof t&&(a.readyState?/loaded|complete/.test(a.readyState)?t():a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&(this.onreadystatechange=null,t())}:a.onload=function(){t()})):"function"==typeof n&&n()}()},loadJS:function(e,t,a){var o=this;"undefined"==e?setTimeout(function(){o.jLoader([t+"?"+global.jscssdate],function(){a&&a()})},0):a&&a()},fixIe6:function(){Kg.UA.Ie6&&(0<Kg.$(".pc_temp_songlist").length&&Kg.$(".pc_temp_songlist li").addEvent("mouseover",function(){Kg.$(this).addClass("fixIe6_songlist")}).addEvent("mouseleave",function(){Kg.$(this).removeClass("fixIe6_songlist")}),0<Kg.$(".pc_temp_btn_splay").length&&Kg.$(".pc_temp_btn_splay").addEvent("mouseover",function(){Kg.$(this).addClass("fixIe6_splay")}).addEvent("mouseleave",function(){Kg.$(this).removeClass("fixIe6_splay")}),fixmaxWidth=function(e){var t;e?t=e:(t=0<Kg.$(".pc_temp_songlist").length?Kg.$(".pc_temp_songlist li"):[],fixmaxWidth.obj=new Array);for(var a=0;a<t.length;a++){var o=t[a];!e&&fixmaxWidth.obj.push(o);var n,i=Kg.$(o).find(".pc_temp_songname")[0],c=o.offsetWidth;o.getAttribute("sw")?n=o.getAttribute("sw"):(n=i.scrollWidth,o.setAttribute("sw",n)),i.style.width=.6*c<n?.6*c+"px":n+"px"}},setTimeout(function(){fixmaxWidth()},1))},check:function(e,t,a){e=Kg.$(e),t=Kg.$(t);var o=(a=a||{}).chk_class||"pc_temp_btn_check",n=a.chked_class||"pc_temp_btn_checked";e.hasClass(n)?(e.removeClass(n),t.removeClass(n)):(e.addClass(n),Kg.$A(Kg.$("."+o)).length-1==Kg.$A(Kg.$("."+n)).length&&t.addClass(n))},checkall:function(e,t){var a=(t=t||{}).chk_class||"pc_temp_btn_check",o=t.chked_class||"pc_temp_btn_checked",n=Kg.$(e).hasClass(o);Kg.$("."+a).removeClass(o),n||Kg.$("."+a).addClass(o)},checkplay:function(e,t,a){a=a||{},t=Kg.$(t),a.chk_class;var o=a.chked_class||"pc_temp_btn_checked",n=[];if(""==e)if(t.hasClass(o))n=null;else{var i=Kg.$A(Kg.$("."+o));for(var c in i)n.push(i[c].getAttribute("data-index"))}else n=[e];return n&&0==n.length?(this.loadJS(typeof DialogBox,"https://staticssl.kugou.com/common/js/min/dialogBox-min.js",function(){new DialogBox({title:"提示",html:"请选择歌曲",status:"warn",button:["确认"],pid:Kg.$(".pc_temp_wrap")[0].scrollHeight==Kg.$(".pc_temp_wrap")[0].clientHeight?"":Kg.$(".pc_temp_wrap")[0],width:185,callback:function(e){0==e&&this.Hide()}}).Show()}),!1):n},shared:null,downloadd:null,hashQueryShortUrl:function(e,a){var t=e.FileName,o=e.Hash,n=e.album_id||0,i=Md5.md5(o+"kgclientshare"),c="weixin"==e.chl?"webCode":"",r={cmid:1,filename:t,hash:o,album_id:n,is_short:1,md5:i,chl:e.chl||"weixin",codes:1,from:c};$.ajax({type:"get",url:"https://tservice.kugou.com/app/",timeout:3e3,dataType:"jsonp",jsonp:"callback",cache:!1,data:r,success:function(e){e&&(e.status?($(".qrcode").find("img").attr("src",e.codes_url),a&&a(e)):31001==e.err_code&&($(".qrcode").find("img").attr("src","https://www.kugou.com/yy/static/images/share_false.jpg"),a&&a("")))},error:function(e,t){a&&a("")}})},download:function(e){var a=e,o=this;o.downloadd||(o.downloadd=dialog({title:"下載歌曲",skin:"download_popup",fixed:!0,content:[' <div class="dialogContent clearfix">','<div class="contetText">','<p><span class="warn_icon"></span>下载歌曲需要在酷狗音乐客户端操作</p></div>','<div class="dialogFooter clearfix">',"<a href=\"#\" class=\"callClient\" onclick=\"_hmt.push(['_trackEvent', 'hideopen', 'opencilick', 'hopenpc']);\">打开客户端</a>","<a href=\"#\" class=\"btnDl\" onclick=\"_hmt.push(['_trackEvent', 'hidedownnew', 'newcilick', 'newpc']);\">下载新版客户端</a>","</div>"," </div>"].join(""),onshow:function(){$(".btnDl").off("click").on("click",function(e){e.preventDefault();var t=[30032,$.extend({action:"click",a:303,b:"歌曲下载弹窗-下载新版客户端btn",fo:"榜单页"},pcSongList.bIcommonConfig()),null,0];apmCollectData.push(t);try{newLogCount()}catch(e){}window.open("http://download.kugou.com/download/kugou_pc");o.downloadd.close().remove()}),$(".callClient").off("click").on("click",function(e){e.preventDefault();var t=[30032,$.extend({action:"click",a:302,b:"歌曲下载弹窗-打开客户端btn",fo:"榜单页"},pcSongList.bIcommonConfig()),null,0];apmCollectData.push(t);try{newLogCount()}catch(e){}o.callExe(a),o.downloadd.close().remove()})},onclose:function(){o.downloadd=null}}),o.downloadd.show())},htmlTitleDecode:function(e){var t="";return 0==e.length?t:t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=e.replace(/&lt;/g,"<")).replace(/&#60;/g,"<")).replace(/&gt;/g,">")).replace(/&#62;/g,">")).replace(/&amp;/g,"&")).replace(/&#38;/g,"&")).replace(/&#63;/g,"?")).replace(/&nbsp;/g," ")).replace(/&#160;/g," ")).replace(/&apos;/g,"'")).replace(/&#039;/g,"'")).replace(/&#42;/g,"*")).replace(/&#47;/g,"/")).replace(/&#92;/g,"\\")).replace(/&#58;/g,":")).replace(/&#124;/g,"|")).replace(/\"/g,"&quot;")},share:function(e){var t=e,n=this,i=n.htmlTitleDecode(t.FileName),c="我在酷狗常听的《"+i+"》，你也来听听吧！（来自 web 酷狗音乐）",r="https://www.kugou.com/yy/static/images/share-cover.png";t.chl="weixin",n.shared||(n.shared=dialog({title:"分享歌曲",skin:"share_popup",fixed:!0,content:["<div id='share_list'>"," <dl>","<dt class='share_weixin'></dt>","<dd class='qrcode'><img src='' /></dd>","<dd>微信</dd>","</dl>","<dl>","<dt class='share_friend'></dt>","<dd>QQ好友</dd>","</dl>","<dl>","<dt class='share_qzone'></dt>","<dd>QQ空间</dd>","</dl>","<dl>","<dt class='share_weibo'></dt>","<dd>新浪微博</dd>","</dl>","</div>"].join(""),onshow:function(){n.hashQueryShortUrl(t,function(e){""==e.data&&31001==e.err_code&&n.upSupportShare("微信"),$(".share_weixin").mouseover(function(){$(".qrcode").show()}).mouseout(function(){$(".qrcode").hide()})}),$.ajax({type:"get",url:"https://www.kugou.com/root/getSongCover?hash="+t.Hash,timeout:3e3,cache:!1,success:function(e){1==e.status&&$.isArray(e.data)&&e.data[0]&&""!=e.data[0].sizable_cover&&(r=e.data[0].sizable_cover.replace(/{size}/,135))},error:function(e,t){}}),$(".share_friend").on("click",function(){var e=[30032,$.extend({action:"click",a:305,b:"分享弹窗-分享渠道btn",fo:"榜单页",ivar4:"QQ好友",ivar6:i},pcSongList.bIcommonConfig()),null,0];apmCollectData.push(e);try{newLogCount()}catch(e){}var a=window.open("");t.chl="qq",n.hashQueryShortUrl(t,function(e){var t=e.data;""==t&&31001==e.err_code?n.upSupportShare("QQ"):a.location="http://connect.qq.com/widget/shareqq/index.html?url="+encodeURIComponent(t)+"&desc=&title="+encodeURIComponent(i)+"&summary="+encodeURIComponent(c)+"&pics="+r+"&flash=&site=www.kugou.com"}),n.shared.close().remove()}),$(".share_qzone").on("click",function(){var e=[30032,$.extend({action:"click",a:305,b:"分享弹窗-分享渠道btn",fo:"榜单页",ivar4:"QQ空间",ivar6:i},pcSongList.bIcommonConfig()),null,0];apmCollectData.push(e);try{newLogCount()}catch(e){}var a=window.open("");t.chl="qzone",n.hashQueryShortUrl(t,function(e){var t=e.data;""==t&&31001==e.err_code?n.upSupportShare("QQ空间"):a.location="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(t)+"&title="+encodeURIComponent(i)+"&pics="+r+"&summary="+encodeURIComponent(c)}),n.shared.close().remove()}),$(".share_weibo").on("click",function(){var a,e=[30032,$.extend({action:"click",a:305,b:"分享弹窗-分享渠道btn",fo:"榜单页",ivar4:"新浪微博",ivar6:i},pcSongList.bIcommonConfig()),null,0];apmCollectData.push(e);try{newLogCount()}catch(e){}a=(a=c.replace("#","%23")).replace("（来自 PC 酷狗音乐）","（ 来自 @酷狗音乐 web版 ）"),a=encodeURIComponent(a);var o=window.open("");t.chl="weibo",n.hashQueryShortUrl(t,function(e){var t=e.data;""==t&&31001==e.err_code?n.upSupportShare("微博"):o.location="http://v.t.sina.com.cn/share/share.php?appkey=340086183&pic="+r+"&url="+encodeURIComponent(t)+"&title="+a}),n.shared.close().remove()})},onclose:function(){n.shared=null}}),n.shared.show())},upSupportShare:function(e){var t=dialog({width:200,height:50,title:"不支持分享",skin:"unshare",content:"该歌曲不支持"+e+"分享"}).show();setTimeout(function(){t.close().remove()},2e3)},callExe:function(e){var t='{"Files":[{"filename":"'+(58<e.FileName.toString().length?e.FileName.toString().substring(0,58)+"...":e.FileName)+'.mp3","hash":"'+e.Hash+'","size":"'+e.size+'","duration":"'+1e3*e.timeLen+'","bitrate":"128","isfilehead":"100","privilege":"'+e.privilege+'","album_id":"'+e.album_id+'"}]}',a="kugou://download?p="+Base64.encode(t);this.isIE(6)||this.isIE(7)||this.isIE(8)?window.open(a):$("body").append(" <iframe style='display:none' src='"+a+"'></iframe>")},isIE:function(e){var t=document.createElement("b");return t.innerHTML="\x3c!--[if IE "+e+"]><i></i><![endif]--\x3e",1===t.getElementsByTagName("i").length},isExists:function(){return $.jStorage.reInit(),$.jStorage.get("playFlag")},addTips:function(){var e=['<div class="playtips"><div class="relativeD">','<div class="playtips_bg"></div>','<img src="https://www.kugou.com/yy/static/images/play/icon_add.png" alt="" class="playtips_icon">','<p class="tipstext">已添加至播放页</p>',"</div></div>"].join(""),t=$(".playtips");0<t.length?t.show().animate({opacity:"1"}).show():$("body").append(e);var a=setTimeout(function(){$(".playtips").hide().animate({opacity:"0"}).hide(),clearTimeout(a)},1e3)},qeryString:function(){if(arg1=arguments[0],arg2=arguments[1],1<arguments.length&&""!=arg1&&""!=arg2&&null!=arg1&&null!=arg2)var e=arguments[0].match(new RegExp("[?#&]"+arg2+"=([^&|#]*)(&?)","i"));else if(""!=arg1&&null!=arg1)e=location.href.match(new RegExp("[?#&]"+arg1+"=([^&|#]*)(&?)","i"));return e?e[1]:e},formatDateTime:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var o=e.getDate();o=o<10?"0"+o:o;var n=e.getHours(),i=e.getMinutes();return t+"-"+a+"-"+o+" "+n+":"+(i=i<10?"0"+i:i)},detectOS:function(){navigator.userAgent;var e="Win32"==navigator.platform||"Windows"==navigator.platform||"Win64"==navigator.platform,t="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;return t?"Mac":"X11"!=navigator.platform||e||t?-1<String(navigator.platform).indexOf("Linux")?"Linux":e?"Windows":"other":"Unix"},getBrowser:function(){var e,t={},a=navigator.userAgent.toLowerCase();return(e=a.match(/rv:([\d.]+)\) like gecko/))?t={v:e[1],type:"ie"}:(e=a.match(/msie ([\d.]+)/))?t={v:e[1],type:"ie"}:(e=a.match(/firefox\/([\d.]+)/))?t={v:e[1],type:"firefox"}:(e=a.match(/chrome\/([\d.]+)/))?t={v:e[1],type:"chrome"}:(e=a.match(/opera.([\d.]+)/))?t={v:e[1],type:"opera"}:(e=a.match(/version\/([\d.]+).*safari/))&&(t={v:e[1],type:"safari"}),t},bIcommonConfig:function(){return kugouC=read("KuGoo"),kugou_id=kugouC.KugooID,{lvt:this.formatDateTime(new Date),os:this.detectOS(),browser:this.getBrowser().type||"",uid:kugou_id||""}},sendbI:function(){var e=location.href,t=document.referrer,a="http://download.kugou.com/download/kugou_pc",o="",n=$(".pc_temp_side a.current").attr("title"),i=$(".pc_temp_side a.current").parent().parent().prev().find("a").attr("title");link_form=this.qeryString("from"),-1!=e.indexOf("baidu")||-1!=t.indexOf("baidu.com")?(e="百度",a="http://xiazai.kugou.com/Corp/kugou7_3762.exe"):-1!=e.indexOf("sogou")||-1!=t.indexOf("sogou")?(e="搜狗",a="http://xiazai.kugou.com/Corp/kugou7_3814.exe"):-1!=e.indexOf("360")||-1!=t.indexOf("so.com")?e="360":-1!=t.indexOf("360.cn")?e="360导航页":-1!=t.indexOf("google.com")?e="谷歌":""==t||-1!=t.indexOf("kugou.com")||-1!=t.indexOf("download.com")?e="直接访问":""!=t&&(e="其他访问"),o="rank"==link_form?"榜单页/"+i:"homepage"==link_form?"首页/"+i:"其他",$("#download a").attr("href",a);var c=$.extend({action:"index",a:3,b:"榜单页访问",o:e,fo:o,ivar4:n},this.bIcommonConfig());pageData=[30032,c,null,0],apmCollectData.push(pageData);try{newLogCount()}catch(e){}},optSong:function(e,t,a){var o=pcSongList.checkplay(t,".checkedAll"),n=[],i=[];if(!1===o)return!1;var c=null==o?global.features:o,r=[];for(var l in c)r.push(global.features[null==o?l:c[l]]);try{i=r;for(var s=$(".pc_temp_side a.current").parent().parent().prev().find("a").attr("title"),d=$(".pc_temp_side a.current").attr("title"),p=(l=0,i.length);l<p;l++){var u={},g=i[l].FileName.indexOf(" - ");u.author_name=i[l].FileName.substring(0,g),u.audio_name=i[l].FileName.substring(g+2),u.timelength=i[l].timeLen,u.Hash=i[l].Hash,u.album_id=i[l].album_id,u.from=s+"/"+d,u.random=(new Date).getTime(),n.push(u)}var h=Kg.JSON.stringify(n);if("false"==pcSongList.isExists()||null===pcSongList.isExists()){$.jStorage.set("k_play_list",h),window.open("//www.kugou.com/song/")}else $.jStorage.set("newsong",h),timeForAccident=setTimeout(function(){if($.jStorage.reInit(),null===$.jStorage.get("playdata")){$.jStorage.set("k_play_list",h),location.href="//www.kugou.com/song/"}},3e3);pcSongList.addTips()}catch(e){}},init:function(){var c=this;function e(e){this.sideMove=!1,this.sideBarList=[],this.sideBool=e||!1}e.prototype={constructor:e,move:function(e,t,a,o){if(this.sideMove)return!1;var n=Kg.$(e).next(),i=n[0].offsetHeight,c=this.sideBarList[t]||i,r=0,l=this;l.sideBarList[t]=c,l.sideMove=!0,Kg.$(e).parent().hasClass("pc_rank_sidebar_collapse")&&(c=0,r=l.sideBarList[t],l.sideBool&&Kg.$(e).next().css("position","static")),c<r&&Kg.$(e).parent().addClass("pc_rank_sidebar_fix"),l.slide(n[0],"height",c,r,function(e){Kg.$(e).parent().removeClass("pc_rank_sidebar_fix"),Kg.$(e).parent().toggleClass("pc_rank_sidebar_collapse"),a&&a(),l.sideMove=!1},o)},slide:function(e,t,a,o,n,i){var c=e,r=(e=e.style,setInterval(function(){o<a?(a-=Math.ceil(.2*(a-o)),e[t]=a+"px",a<=o&&(clearInterval(r),n&&n(c))):(a+=Math.ceil(.2*(o-a)),e[t]=a+"px",o<=a&&(clearInterval(r),n&&n(c))),i&&i()},30));return r}},c.sendbI(),c.fixIe6(),sdnClick(12011),"Mac"==c.detectOS()&&$("#download a").attr("href","http://download.kugou.com/download/kugou_mac"),Kg.$(".homeNav li a").eq(1).addClass("active");var r=$(".pc_temp_side a.current").attr("title"),t=new e(!0);Kg.$(".pc_rank_sidebar h3").addEvent("click",function(){t.move.call(t,this,this.getAttribute("data-index"),null)}),Kg.$("img").addEvent("click",function(){var e=this.getAttribute("_href");e&&window.open(e)}),$("#pc_temp_title .pc_temp_bicon_play").off("click").on("click",function(){var e=this.getAttribute("data-index"),t=this.getAttribute("data-active");return"nolive"!=t&&c.optSong(t,e,this),"play"==t&&""==e?sdnClick(12187):"playDwn"!=t&&"play"!=t||""==e||sdnClick(12164),!1}),0<Kg.$(".pc_temp_songlist").length&&(Kg.$(".pc_temp_songlist ul .pc_temp_btn_check").addEvent("click",function(e){return Kg.stopEvent(e),c.check(this,".checkedAll"),!1}),Kg.$(".pc_temp_songhead .checkedAll").addEvent("click",function(e){return Kg.stopEvent(e),c.checkall(this),!1})),$("#rankWrap a").off("click").on("click",function(e){var t=this.getAttribute("data-index"),a=this.getAttribute("data-active");if("nolive"!=a&&"share"!=a&&"download"!=a&&c.optSong(a,t,this),"nolive"==a&&window.open(this.getAttribute("href")),"share"==a){var o=global.features[t];c.share(o);var n=$.extend({action:"click",a:304,b:"分享btn",fo:"榜单页",ivar1:r,ivar4:"歌曲列表"},c.bIcommonConfig());shareData=[30032,n,null,0],apmCollectData.push(shareData);try{newLogCount()}catch(e){}}if("download"==a){o=global.features[t];c.download(o);var i=$.extend({action:"click",a:301,b:"下载btn",fo:"榜单页",ivar1:r,ivar4:"歌曲列表"},c.bIcommonConfig());downloadData=[30032,i,null,0],apmCollectData.push(downloadData);try{newLogCount()}catch(e){}}return"play"==a&&""==t?sdnClick(12187):"playDwn"!=a&&"play"!=a||""==t||sdnClick(12164),!1}),$("#rankWrap li").off("click").on("click",function(e){var t=e.srcElement?e.srcElement:e.target;window.event?window.event.cancelBubble=!0:e.stopPropagation(),e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1;var a=this.getAttribute("data-index"),o=t.getAttribute("data-active");"nolive"!=o&&"share"!=o&&"download"!=o&&c.optSong(o,a,this)}),$("#download").on("click",function(){var e=[30032,$.extend({action:"click",a:301,b:"下载btn",fo:"榜单页",ivar1:r,ivar4:"底部-立即下载btn"},c.bIcommonConfig()),null,0];apmCollectData.push(e);try{newLogCount()}catch(e){}}),Kg.$(document).addEvent("click",function(){Kg.$(".pc_temp_more_check").removeClass("pc_temp_more_check")}),Kg.UA.Ie6&&Kg.$(window).addEvent("resize",function(){fixmaxWidth(fixmaxWidth.obj)}),parseInt(global.total)>parseInt(global.pagesize)&&c.loadJS(typeof Page,"https://staticssl.kugou.com/common/js/min/page-min.js",function(){Kg.$(".pc_temp_nvg").html(new Page(global.page,global.total,5,global.pagesize).GetText())})},GotoNext:function(e){location.href.match(/rank\/index/)?location.href=location.href.replace(/\/\d+\-/g,"/"+e+"-"):location.href=global.kg_domain+"/rank/home/"+e+"-22943.html"}};$(document).ready(function(){pcSongList.init()});