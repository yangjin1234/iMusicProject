function sdnClick(e){(new Image).src="http://sdn.kugou.com/link.aspx?id="+e+"&url=&t="+Math.random()}var singerPage={isExists:function(){return $.jStorage.reInit(),$.jStorage.get("playFlag")},addTips:function(){var e=['<div class="playtips"><div class="relativeD">','<div class="playtips_bg"></div>','<img src="http://www.kugou.com/yy/static/images/play/icon_add.png" alt="" class="playtips_icon">','<p class="tipstext">已添加至播放页</p>',"</div></div>"].join(""),a=$(".playtips");0<a.length?a.show().animate({opacity:"1"}).show():$("body").append(e);var n=setTimeout(function(){$(".playtips").hide().animate({opacity:"0"}).hide(),clearTimeout(n)},1e3)},PlayAllAndCreateList:function(e){var a,n=Kg.$C("song_hid",e),i=[];if(0!=n.length){for(var t=[],o=0;o<n.length;o++)if("hidden"==n[o].type||n[o].checked){var s={Hash:songsdata[o].hash,singername:songsdata[o].singername,songname:songsdata[o].songname,timeLen:songsdata[o].duration,album_id:songsdata[o].album_id};t.push(s)}if(t.length<=0)alert("请选择歌曲");else{o=0;for(var l=(a=t).length;o<l;o++){var c={};c.author_name=a[o].singername,c.audio_name=a[o].songname,c.timelength=a[o].timeLen,c.Hash=a[o].Hash,c.album_id=a[o].album_id,c.random=(new Date).getTime(),i.push(c)}var r=Kg.JSON.stringify(i);if("false"==singerPage.isExists()||null===singerPage.isExists()){$.jStorage.set("k_play_list",r),window.open("//www.kugou.com/song/")}else $.jStorage.set("newsong",r),timeForAccident=setTimeout(function(){if($.jStorage.reInit(),null===$.jStorage.get("playdata")){$.jStorage.set("k_play_list",r),location.href="//www.kugou.com/song/"}},3e3);singerPage.addTips()}}},openMV:function(e){var a=e.split("|"),n=a[0],i=a[1],t='{"filename":"'+n+'", "mvurl":"'+("http://mvfiles.kugou.com/mp4/"+i.substr(0,2)+"/"+i.substr(2,2)+"/"+i+".mp4")+'"}';KgWebSuperCall.playMv(t)},showTab:function(e){var a=Kg.$T("li",Kg.$C("tab")[0]);if(document.all)a[e].click();else{var n=document.createEvent("MouseEvent");n.initEvent("click",!0,!0),a[e].dispatchEvent(n)}},clickAll:function(e){var a=Kg.$C("cb","ss");if(1==e.checked)for(var n=0;n<a.length;n++)a[n].disabled||(a[n].checked=!0);else for(n=0;n<a.length;n++)a[n].checked=!1},GetData:function(e,a,n){currentClass=e,pageSize=a,RecordCount=n,this.GotoNext(1,pageSize)},checkClkAll:function(e){Kg.stopEvent(e||window.event);for(var a=Kg.$C("cb"),n=0;n<a.length;n++)if(1!=a[n].checked)return void(Kg.$("selAll").checked=!1);Kg.$("selAll").checked=!0},shared:null,downloadd:null,hashQueryShortUrl:function(e,n){var a=this,i=e.singername+"-"+e.songname,t=e.hash,o=e.album_id||0,s=Md5.md5(t+"kgclientshare"),l="weixin"==e.chl?"webCode":"",c={cmid:1,filename:i,hash:t,album_id:o,is_short:1,md5:s,chl:e.chl||"weixin",codes:1,from:l};$.ajax({type:"get",url:"https://tservice.kugou.com/app/",timeout:5e3,dataType:"jsonp",jsonp:"callback",cache:!1,data:c,success:function(e){e&&(e.status?($(".qrcode").find("img").attr("src",e.codes_url),n&&n(e)):31001==e.err_code&&(setTimeout(function(){a.shareIsCanClick=!0},1e3),$(".qrcode").find("img").attr("src","http://www.kugou.com/yy/static/images/share_false.jpg"),n&&n("")))},error:function(e,a){n&&n("")}})},download:function(a){var n=this;n.downloadd||(n.downloadd=dialog({title:"下載歌曲",skin:"download_popup",fixed:!0,content:[' <div class="dialogContent clearfix">','<div class="contetText">','<p><span class="warn_icon"></span>下载歌曲需要在酷狗音乐客户端操作</p></div>','<div class="dialogFooter clearfix">','<a href="#" class="callClient">打开客户端</a>','<a href="#" class="btnDl">下载新版客户端</a>',"</div>"," </div>"].join(""),onshow:function(){$(".btnDl").off("click").on("click",function(e){e.preventDefault();window.open("http://download.kugou.com/download/kugou_pc");n.downloadd.close().remove()}),$(".callClient").off("click").on("click",function(e){e.preventDefault(),n.callExe({song_info:a}),n.downloadd.close().remove()})},onclose:function(){n.downloadd=null}}),n.downloadd.show())},htmlTitleDecode:function(e){var a="";return 0==e.length?a:a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=e.replace(/&lt;/g,"<")).replace(/&#60;/g,"<")).replace(/&gt;/g,">")).replace(/&#62;/g,">")).replace(/&amp;/g,"&")).replace(/&#38;/g,"&")).replace(/&#63;/g,"?")).replace(/&nbsp;/g," ")).replace(/&#160;/g," ")).replace(/&apos;/g,"'")).replace(/&#039;/g,"'")).replace(/&#42;/g,"*")).replace(/&#47;/g,"/")).replace(/&#92;/g,"\\")).replace(/&#58;/g,":")).replace(/&#124;/g,"|")).replace(/\"/g,"&quot;")},share:function(e){var t=this,i=t.htmlTitleDecode(e.author_name)+"-"+t.htmlTitleDecode(e.audio_name),o="我在酷狗常听的《"+i+"》，你也来听听吧！（来自 web 酷狗音乐）",s="http://www.kugou.com/yy/static/images/share-cover.png";t.shared||(t.shared=dialog({title:"分享歌曲",skin:"share_popup",fixed:!0,content:["<div id='share_list'>"," <dl>","<dt class='share_weixin'></dt>","<dd class='qrcode'><img src='' /></dd>","<dd>微信</dd>","</dl>","<dl>","<dt class='share_friend'></dt>","<dd>QQ好友</dd>","</dl>","<dl>","<dt class='share_qzone'></dt>","<dd>QQ空间</dd>","</dl>","<dl>","<dt class='share_weibo'></dt>","<dd>新浪微博</dd>","</dl>","</div>"].join(""),onshow:function(){e.chl="weixin",t.hashQueryShortUrl(e,function(e){""!=e.data&&31001!=e.err_code||t.upSupportShare("微信"),$(".share_weixin").mouseover(function(){$(".qrcode").show()}).mouseout(function(){$(".qrcode").hide()})}),$.ajax({type:"get",url:"https://www.kugou.com/root/getSongCover?hash="+e.hash,timeout:3e3,cache:!1,success:function(e){1==e.status&&$.isArray(e.data)&&e.data[0]&&""!=e.data[0].sizable_cover&&(s=e.data[0].sizable_cover.replace(/{size}/,135))},error:function(e,a){}}),$(".share_friend").on("click",function(){var n=window.open("");e.chl="qq",t.hashQueryShortUrl(e,function(e){var a=e.data;""==a||31001==e.err_code?t.upSupportShare("QQ"):n.location="http://connect.qq.com/widget/shareqq/index.html?url="+encodeURIComponent(a)+"&desc=&title="+encodeURIComponent(i)+"&summary="+encodeURIComponent(o)+"&pics="+s+"&flash=&site=www.kugou.com"}),t.shared.close().remove()}),$(".share_qzone").on("click",function(){var n=window.open("");e.chl="qzone",t.hashQueryShortUrl(e,function(e){var a=e.data;""==a||31001==e.err_code?t.upSupportShare("QQ空间"):n.location="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(a)+"&title="+encodeURIComponent(i)+"&pics="+s+"&summary="+encodeURIComponent(o)}),t.shared.close().remove()}),$(".share_weibo").on("click",function(){var n;n=(n=o.replace("#","%23")).replace("（来自 PC 酷狗音乐）","（ 来自 @酷狗音乐 web版 ）"),n=encodeURIComponent(n);var i=window.open("");e.chl="weibo",t.hashQueryShortUrl(e,function(e){var a=e.data;""==a||31001==e.err_code?t.upSupportShare("微博"):i.location="http://v.t.sina.com.cn/share/share.php?appkey=340086183&pic="+s+"&url="+encodeURIComponent(a)+"&title="+n}),t.shared.close().remove()})},onclose:function(){t.shared=null}}),t.shared.show())},upSupportShare:function(e){var a=dialog({width:200,height:50,title:"不支持分享",skin:"unshare",content:"该歌曲不支持"+e+"分享"}).show();setTimeout(function(){a.close().remove()},2e3)},callExe:function(e){var a=e.song_info,n=a.singername+"-"+a.songname,i='{"Files":[{"filename":"'+(58<n.length?n.substring(0,58)+"...":n)+'.mp3","hash":"'+a.Hash+'","size":"'+a.size+'","duration":"'+1e3*a.timeLen+'","bitrate":"128","isfilehead":"100","privilege":"'+a.privilege+'","album_id":"'+a.album_id+'"}]}',t="kugou://download?p="+Base64.encode(i);this.isIE(6)||this.isIE(7)||this.isIE(8)?window.open(t):$("body").append(" <iframe style='display:none' src='"+t+"'></iframe>")},isIE:function(e){var a=document.createElement("b");return a.innerHTML="\x3c!--[if IE "+e+"]><i></i><![endif]--\x3e",1===a.getElementsByTagName("i").length},GotoNext:function(u,m){var e,h=Kg.$(currentClass+"_container");switch(currentClass){case"song":e="www.kugou.com/yy?r=singer/song&sid="+singerID+"&p="+u+"&t="+Number(new Date),m=30;break;case"album":e="www.kugou.com/yy?r=singer/album&sid="+singerID+"&p="+u+"&t="+Number(new Date),m=14;break;case"mv":e="www.kugou.com/yy?r=singer/video&sid="+singerID+"&p="+u+"&t="+Number(new Date),m=12}h.innerHTML="<li>正在加载...<li>",Kg.postJSON(e,{},function(e){if(1==e.status&&0!=e.total){Kg.$(currentClass+"_nvg").innerHTML=new Page(u,e.total,DisplayPages,m).GetText();var a="",n=e.data,t=0;for(i=0;i<n.length;i++)if("mv"==currentClass){var o=(i+1)%4==0?"last":"",s=n[i].name.replace(/\'/g,"\\&#039;").replace(/\"/g,"\\&quot;"),l="";n[i].name&&(l=n[i].mv_name.replace(/\'/g,"\\&#039;").replace(/\"/g,"\\&quot;")),o=(i+1)%6==0?"last":"";var c=s+" - "+l+"|"+n[i].mv_hash,r=(n[i].mv_hash,n[i].have_img,n[i].bigpic);a+='<li class="'+o+'"><a class="pic" hidefocus="true" onclick="sdnClick(12097)" href="//www.kugou.com/mvweb/html/mv_'+n[i].id+'.html" target="_blank"><img onerror="this.src=\''+kg_domain+'/static/images/default4.jpg\'" src="'+r+'" width="122" height="92" /><i onclick=""></i><b></b></a><span><a onclick="sdnClick(12097)" href="//www.kugou.com/mvweb/html/mv_'+n[i].id+'.html" target="_blank" title="'+n[i].name+'">'+n[i].name.intercept(30,"...")+"</a></span></li>"}else{o=(i+1)%4==0?"last":"",s=n[i].singername.replace(/\'/g,"\\&#039;").replace(/\"/g,"\\&quot;"),l="";if(n[i].songname&&(l=n[i].songname.replace(/\'/g,"\\&#039;").replace(/\"/g,"\\&quot;")),"song"==currentClass){var d=(u-1)*m+i+1;c=s+" - "+l+"|"+n[i].hash+"|"+n[i].duration;0<n[i].filesize?(a+='<li><a href="javascript:;"  hidefocus="true">',a+='<input onclick="singerPage.checkClkAll(event)" type="checkbox" checked="checked" class="cb song_hid" value="'+c+'" />',a+='<span title="分享" class="share" onclick="showShare(event,this,\''+c+"')\"></span>",a+='<span title="播放" class="listen" ></span>',a+='<span class="num1">'+(d<10?"0"+d:d)+'</span><span class="text" title="'+n[i].songname+'"><i>'+n[i].songname+"</i></span></a></li>"):(a+='<li><a href="javascript:;" hidefocus="true"><input type="checkbox" disabled="disabled" class="cb" />',a+='<span class="num1 disabled_text">'+(d<10?"0"+d:d)+'</span><span class="text" title="'+n[i].songname+'"><i class="disabled_text" >'+n[i].songname+"</i></span></a></li>",t+=1)}else if("album"==currentClass){o=(i+1)%7==0?"last":"";var g=kg_domain+"album/single/"+n[i].albumid+".html";a+='<li class="'+o+'"> <a class="pic" hidefocus="true" href="'+g+'" onclick="sdnClick(12095)"><img src="'+n[i].img+'" width="100" height="100" onerror="this.src=\''+kg_domain+"/static/images/default1.jpg'\" /><i onmousemove=\"this.className='hover'\" onmouseout=\"this.className=''\" onclick=\"singerPage.listenAlbum('"+n[i].albumid+'\');sdnClick(12096);Kg.stopEvent(event);return false"></i><b></b></a> <p><a  href="'+g+'" onclick="sdnClick(12095)" title="'+n[i].albumname+'">'+n[i].albumname+"</a></p> <span>"+n[i].publish_time.split(" ")[0]+"</span> </li>"}}t==n.length?(Kg.$("selAll").checked=!1,Kg.$("selAll").disabled=!0,Kg.$("aplayAll").className="play disabled"):(Kg.$("selAll").checked=!0,Kg.$("selAll").disabled="",Kg.$("aplayAll").className="play"),h.innerHTML=""!=a?a:"<li>暂无记录<li>"}else h.innerHTML="<li>暂无记录<li>",Kg.$(currentClass+"_nvg").innerHTML=""},function(){h.innerHTML="<li>暂无记录<li>",Kg.$(currentClass+"_nvg").innerHTML=""})},listenAlbum:function(e,a){var r=this;Kg.postJSON(kg_domain+"album/song/aid="+e.toString()+"&t="+Number(new Date),{},function(e){if(1==e.status){for(var a=e.data,n=[],i=[],t=[],o=0;o<a.length;o++){e={Hash:a[o].hash,FileName:a[o].singername+" - "+a[o].songname,timeLen:a[o].duration,authorName:a[o].singername,audioName:a[o].songname,album_id:a[o].album_id};n.push(e)}if(0<n.length)try{o=0;for(var s=(t=n).length;o<s;o++){var l={};l.author_name=t[o].authorName,l.audio_name=t[o].audioName,l.timelength=t[o].timeLen,l.Hash=t[o].Hash,l.album_id=t[o].album_id,l.random=(new Date).getTime(),i.push(l)}var c=Kg.JSON.stringify(i);if("false"==singerPage.isExists()||null===singerPage.isExists()){$.jStorage.set("k_play_list",c),window.open("//www.kugou.com/song/")}else $.jStorage.set("newsong",c),timeForAccident=setTimeout(function(){if($.jStorage.reInit(),null===$.jStorage.get("playdata")){$.jStorage.set("k_play_list",c),location.href="//www.kugou.com/song/"}},3e3);r.addTips()}catch(e){}}},null,!1)},detectOS:function(){navigator.userAgent;var e="Win32"==navigator.platform||"Windows"==navigator.platform||"Win64"==navigator.platform,a="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;return a?"Mac":"X11"!=navigator.platform||e||a?-1<String(navigator.platform).indexOf("Linux")?"Linux":e?"Windows":"other":"Unix"},init:function(){var c=this,e=location.href,a=document.referrer,n="http://download.kugou.com/download/kugou_pc";try{if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var i=e.match(/\d+/g)[0];window.location="http://m.kugou.com/singer/info/"+i+location.search}-1!=e.indexOf("baidu")||-1!=a.indexOf("baidu.com")?n="http://xiazai.kugou.com/Corp/kugou7_3762.exe":-1==e.indexOf("sogou")&&-1==a.indexOf("sogou")||(n="http://xiazai.kugou.com/Corp/kugou7_3814.exe")}catch(e){}if((192419===singerID||6335===singerID)&&""!==document.referrer&&!/^https?:\/\/.*?\.kugou\.com\//.test(document.referrer)){var t={win:!1,mac:!1,xll:!1},o=navigator.platform;t.win=0==o.indexOf("Win"),t.mac=0==o.indexOf("Mac"),t.x11="X11"==o||0==o.indexOf("Linux"),t.win||t.mac||t.xll?window.location.href=192419===singerID?"http://huodong.kugou.com/a2016/html/singer4/singer2.html":"http://huodong.kugou.com/a2016/html/singer4/singer3.html":window.location.href=192419===singerID?"http://huodong.kugou.com/a2016/html/singer4Phone/singer2.html":"http://huodong.kugou.com/a2016/html/singer4Phone/singer3.html"}"-1"!=a.indexOf("music.so.com")&&(sdnClick(16858),sdnClick(16859),document.getElementById("sobanner").style.display="block"),Kg.$("song_nvg").innerHTML=new Page(1,songsTotal,5,30).GetText(),t1=new Tab(Kg.$C("tab")[0],"li",Kg.$("content"),"div",{callback:function(){}}),new Lazyload,$(".download a").attr("href",n),"Mac"==c.detectOS()&&$(".download a").attr("href","http://download.kugou.com/download/kugou_mac"),sdnClick(11981),sdnClick(12085);var s=$("#singer_content"),l=$("#text"),r=s.height();l.css({opacity:0,zIndex:-1}),$(".more_detail").click(function(e){e.stopPropagation(),"1"==l.css("opacity")?l.css({opacity:0,zIndex:-1}):l.css({opacity:1,zIndex:999}),sdnClick(12086)}),$(document).click(function(){l.css({opacity:0,zIndex:-1})}),s.mousedown(function(e){e.stopPropagation()}),l.click(function(e){e.stopPropagation()}),240<r&&(s.height(240),s.jScrollPane({hijackInternalLinks:!0,animateScroll:!0,autoReinitialise:!0})),0===songsSelectAll?(Kg.$("selAll").checked=!1,Kg.$("selAll").disabled=!0,Kg.$("aplayAll").className="play disabled"):(Kg.$("selAll").checked=!0,Kg.$("selAll").disabled="",Kg.$("aplayAll").className="play");var d=Request.QueryString("classid");classid=""==d||null==d?0:d;Request.QueryString("py");$("#song_container").on("click","a",function(e){var a=$(e.target).closest("li").index(),n=songsdata[a],i={Hash:n.hash,FileName:n.singername+" - "+n.songname,timeLen:n.duration,authorName:n.singername,audioName:n.songname,album_id:n.album_id};playData=[i],playSongs=[],songData=[],songData=playData;for(var t=0,o=songData.length;t<o;t++){var s={};s.author_name=songData[t].authorName,s.audio_name=songData[t].audioName,s.timelength=songData[t].timeLen,s.Hash=songData[t].Hash,s.album_id=songData[t].album_id,s.random=(new Date).getTime(),playSongs.push(s)}var l=Kg.JSON.stringify(playSongs);if("false"==c.isExists()||null===c.isExists()){$.jStorage.set("k_play_list",l),window.open("//www.kugou.com/song/")}else $.jStorage.set("newsong",l),timeForAccident=setTimeout(function(){if($.jStorage.reInit(),null===$.jStorage.get("playdata")){$.jStorage.set("k_play_list",l),location.href="//www.kugou.com/song/"}},3e3);c.addTips(),sdnClick(12093)}),$("#song_container").on("click","span.share",function(e){e.stopPropagation();var a=$(e.target).closest("li").index();c.share(songsdata[a])}),$("#aplayAll").on("click",function(){c.PlayAllAndCreateList("ss"),sdnClick(12094)}),$("#selAll").on("click",function(){c.clickAll(this)}),$("#song").on("click",function(){0==$("#song_container").find("li").length&&c.GetData("song",24,0)}),$("#album").on("click",function(){0==$("#album_container").find("li").length&&c.GetData("album",28,0)}),$("#mv").on("click",function(){0==$("#mv_container").find("li").length&&c.GetData("mv",24,0)})}};$(document).ready(function(){singerPage.init(),-1!=location.href.indexOf("mv")&&$("#mv").trigger("click")});